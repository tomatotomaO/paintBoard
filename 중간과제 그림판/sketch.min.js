let x1,x2,x3,y1,y2,y3,num_op,cap,cap2,size_pen=1,icon,icon2;poly=0,poly_NumberOfexe=0;let op=[0,0,0,0,0,0,0,0,0,0,0,0],c=[0,0,0],s_r=[0,0],d=[0,0,0,0,0,0,0],f=[0,0,0,0,0,0,0];const op_number=12;function preload(){icon=loadImage("icon.png"),icon2=loadImage("save_del.png")}function setup(){x1=0,y1=0,x2=0,y2=0,createCanvas(1980,1280),background(255),color_paltte()}function draw(){num_op=op.indexOf(1),play_op(),cap2=get(220,220,1280,980),set_menu(),Save_and_reset(),menu_icon(),fill(c),rect(250,50,100,100)}function set_menu(){noStroke(),fill(230),rect(0,0,200,height),rect(0,0,width,46),rect(0,162,width,38),rect(0,0,465,200),rect(1295,0,1e3,200),fill(200),rect(200,200,20,height),rect(200,200,width,20),rect(1500,200,480,height),rect(200,1200,width,80),fill(220),rect(210,10,180,180),fill(200),rect(25,250,150,450),rect(1410,40,250,125),stroke(200),strokeWeight(3),noFill(),rect(465,45,830,115),rect(210,15,180,170)}function color_paltte(){noStroke(),fill(245),rect(400,40,1300,130);for(let p=0,t=50,x=415,y=50,i=0;i<6;i++,p+=t){size=50,i<3?x+=size+5:3==i?y+=size+5:i>3&&(x-=size+5),fill(p),rect(x,y,size,size);for(let for_r=255,for_g=0,for_b=0,i=1,result=0,n=200,x=635,y=50;i<=24;i++){let size=50,p=[];switch(i%2==0?fill(for_r,for_g,for_b):i%2!=0&&fill(for_r+100,for_g+100,for_b+100),i){case 11:fill(117,0,219);break;case 13:fill(0,172,92);break;case 14:fill(132,158,3);break;case 15:fill(90,154,122);break;case 16:fill(182,109,0);break;case 19:fill(255,212,186);break;case 20:fill(223,119,87)}if(i%4==0&&result++,rect(x,y,size,size),i%2==0){switch(result){case 0:for_b+=n;break;case 1:for_r-=n;break;case 2:for_g+=n;break;case 3:for_b-=n;break;case 4:for_r+=n;break;case 5:for_g-=n}y-=size+5,x+=size+5}else i%2!=0&&(y+=size+5)}}}function menu_icon(){noStroke();let x=25,y=250,size=70;for(let i=0;i<12;i++)fill(245-20*op[i]),rect(x,y,70,70),i%2==0?x+=75:(x-=75,y+=75);draw_icon()}function draw_icon(){let x=25,y=250;image(icon,x-10,y-30,165,525),x=1400,y=40,image(icon2,x+10,y-5,219.5,133)}function get_opNumber(){let x=25,y=250,size=70;for(let i=0;i<12;i++){if(mouseX>x&&mouseX<x+70&&mouseY>y&&mouseY<y+70){for(let q=0;q<12;q++)op[q]=0;op[i]=1}i%2==0?x+=75:(x-=75,y+=75)}}function play_op(){if(2===num_op&&op2_spoid(),mouseX>=220&&mouseX<=1500&&pmouseX>=220&&pmouseX<=1500&&mouseY>=220&&mouseY<=1200&&pmouseY>=220&&pmouseY<=1200)switch(num_op){case 0:op0_erase();break;case 1:op1_pencil();break;case 3:op3_brush();break;case 4:op4_line();break;case 5:op5_Gline();break;case 6:op6_sq(0);break;case 7:op7_Rsq(0);break;case 8:op8_circle(0);break;case 9:op9_poly(0);break;case 10:op10_spray();break;case 11:op11_text()}}function getColor_atPallte(){let x=415,y=50,size=50,pallte=[];for(let i=0;i<32;i++){if(mouseX>x&&mouseX<x+50&&mouseY>y&&mouseY<y+50){for(let q=0;q<32;q++)pallte[q]=0;pallte[i]=1}i%2==0?y+=55:(y-=55,x+=55)}-1!=pallte.indexOf(1)&&(c=get(mouseX,mouseY))}function Save_and_reset(){let x=1400,y=40,size=120;noStroke();for(let i=0;i<2;i++)fill(235-20*s_r[i]),rect(x,y,120,120),x+=130}function get_Save_and_reset(){let x=1400,y=40,size=120;for(let i=0;i<2;i++){if(mouseX>x&&mouseX<x+120&&mouseY>y&&mouseY<160){for(let q=0;q<2;q++)s_r[q]=0;s_r[i]=1}0===i&&(x+=130)}1===s_r[0]&&main_save(),1===s_r[1]&&main_reset()}function op0_erase(){if(!0===mouseIsPressed){fill(255),noStroke();for(let x=pmouseX,y=pmouseY;x<=mouseX&&y<=mouseY;x++,y++)rect(x,y,5*size_pen+5,5*size_pen+5);rect(pmouseX,pmouseY,5*size_pen+5,5*size_pen+5),rect(mouseX,mouseY,5*size_pen+5,5*size_pen+5)}}function op1_pencil(){!0===mouseIsPressed&&(stroke(c),strokeWeight(size_pen),line(pmouseX,pmouseY,mouseX,mouseY))}function op2_spoid(){mouseX>220&&!0===mouseIsPressed&&(c=get(mouseX,mouseY))}function op3_brush(){if(!0===mouseIsPressed){let brushsize=10*size_pen+10;fill(c),stroke(c),strokeWeight(brushsize),line(pmouseX+brushsize/2,pmouseY+brushsize/2,mouseX+brushsize/2,mouseY+brushsize/2),noStroke(),rect(pmouseX,pmouseY,10*size_pen+10,10*size_pen+10),rect(mouseX,mouseY,10*size_pen+10,10*size_pen+10)}}function op4_line(){strokeWeight(2*size_pen),stroke(c),line(x1,y1,x2,y2)}function op5_Gline(){}function op6_sq(a){0===a&&x2-x1>5&&(noFill(),strokeWeight(2*size_pen),stroke(c),rect(x1,y1,x2-x1,y2-y1))}function op7_Rsq(a){0===a&&x2-x1>5&&(noFill(),strokeWeight(2*size_pen),stroke(c),rect(x1,y1,x2-x1,y2-y1,(x2-x1+y2-y1)/20,(x2-x1+y2-y1)/20))}function op8_circle(a){if(0===a){let a1,a2,cir_w,cir_h;cir_w=(x2-x1)/2,cir_h=(y2-y1)/2,a1=x1+cir_w,a2=y1+cir_h,cir_w>5&&(noFill(),strokeWeight(2*size_pen),stroke(c),ellipse(a1,a2,2*cir_w,2*cir_h))}}function op9_poly(a){if(1===a){stroke(c),strokeWeight(2*size_pen),noFill();let i=d.indexOf(0);beginShape(),poly<7?(vertex(d[0],f[0]),i-6>0&&vertex(d[i-6],f[i-6]),i-5>0&&vertex(d[i-5],f[i-5]),i-4>0&&vertex(d[i-4],f[i-4]),i-3>0&&vertex(d[i-3],f[i-3]),i-2>0&&vertex(d[i-2],f[i-2]),i-1>0&&vertex(d[i-1],f[i-1])):(vertex(d[0],f[0]),vertex(d[1],f[1]),vertex(d[2],f[2]),vertex(d[3],f[3]),vertex(d[4],f[4]),vertex(d[5],f[5]),vertex(d[6],f[6])),endShape(CLOSE),poly=0,d.length=7,f.length=7,d=[0,0,0,0,0,0,0],f=[0,0,0,0,0,0,0],a=0,poly_NumberOfexe++}}function op10_spray(){let a1=mouseX,b1=mouseY,space=5;if(!0===mouseIsPressed)for(let r=20*size_pen;r>2;r-=space,space++)for(let angle=0;angle<2*PI;angle+=space/10){let x=a1+r*cos(angle),y=b1+r*sin(angle);stroke(c),strokeWeight(1),point(x,y)}}function op11_text(tex){text(tex,x2,y2)}function op12_glass(){image(cap2,220,220,1280,960)}async function main_save(){Save_and_reset(),cap=get(220,220,1280,980),save(cap,"save.jpg"),await delay(150),!1===mouseIsPressed&&(s_r[0]=0,s_r[1]=0,Save_and_reset())}async function main_reset(){if(x1=0,x2=0,y1=0,y2=0,op6_sq(1),op7_Rsq(1),op8_circle(1),Save_and_reset(),background(255),color_paltte(),await delay(150),!1===mouseIsPressed){for(let q=0;q<12;q++)op[q]=0;s_r[0]=0,s_r[1]=0,Save_and_reset()}}function keyPressed(){switch(key){case"1":size_pen=1;break;case"2":size_pen=2;break;case"3":size_pen=3;break;case"4":size_pen=4;break;case"5":size_pen=5;break;case"6":size_pen=6;break;case"7":size_pen=7;break;case"8":size_pen=8;break;case"9":size_pen=9;break;case"0":size_pen=10;break;case"-":size_pen--;break;case"=":size_pen++}size_pen>10&&(size_pen=10),"c"===key&&color_paltte(),"d"===key&&main_reset(),"s"===key&&main_save()}function mousePressed(){mouseY>=160&&(x1=mouseX,y1=mouseY,x2=mouseX,y2=mouseY)}function mouseClicked(){function poly_Getxy(a){0==a&&mouseX>=220&&mouseX<=1500&&mouseY>=220&&mouseY<=1200&&(poly<7?(d[poly]=x2,f[poly]=y2,0!==poly&&d[0]-5<d[poly]&&d[0]+5>d[poly]&&f[0]-5<f[poly]&&f[0]+5>f[poly]&&(d[poly]=d[0],f[poly]=f[0],op9_poly(1)),fill(c),ellipse(d[poly],f[poly],2*size_pen,2*size_pen),poly++):poly>=7&&op9_poly(1))}function text_prompt(){if(mouseX>=220&&mouseX<=1500&&mouseY>=220&&mouseY<=1200){let tex;op11_text(prompt("텍스트를 입력하세요"))}}get_opNumber(),mouseX>1400&&mouseY<200&&get_Save_and_reset(),0===op[2]&&getColor_atPallte(),mouseY>=160&&(x2=mouseX,y2=mouseY),1===op[9]&&(0==poly_NumberOfexe?poly_Getxy(0):poly_NumberOfexe--),1===op[11]&&text_prompt()}function mouseDragged(){}function delay(ms=1e3){return new Promise(resolve=>setTimeout(resolve,ms))}